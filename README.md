# ytb-most-replayed

On May 18, 2022, YouTube began rolling out a new feature that highlights the "most replayed" parts of a video. YouTube writes that the feature allows users to see a graphic that highlights the "most frequently replayed parts of the video."

<p align="center">
  <img src="https://github.com/Dorian25/ytb-most-replayed/assets/32178615/6f8e14fa-95e5-4b58-a3a6-df7fa96af62c">
</p>


## Features

- **Conversion SVG to graph** :framed_picture: :arrow_right: :chart_with_upwards_trend:
> explaination
- :mountain: **Detection peaks**
> explaination
- :gear: **Parameters**
>


## Example

1. Choose a YouTube video
> Date de publication : 1 avril 2023
> 
> Nombre de vues : 158 902 558 vues
> 
> URL : https://www.youtube.com/watch?v=1WEAJ-DFkHE
<p align="center">
  <img src="http://i3.ytimg.com/vi/1WEAJ-DFkHE/hqdefault.jpg">
</p>

2. The program will move the mouse over the progress bar of the video `ytp-progress-bar-container` to display the heatmap

> SVG Image
<p align="center">
<img src="https://github.com/Dorian25/ytb-most-replayed/assets/32178615/62286119-47c6-4790-a26b-29e811d4cc36">
</p>

> SVG Code HTML
```html
<svg class="ytp-heat-map-svg" height="100%" preserveAspectRatio="none" version="1.1" viewBox="0 0 1000 100" width="100%" style="height: 40px;">
  <defs>
    <clipPath id="5">
    <path class="ytp-heat-map-path" d="M 0.0,100.0 C 1.0,87.5 2.0,41.9 5.0,37.5 C 8.0,33.2 11.0,69.0 15.0,78.1 C 19.0,87.3 21.0,81.6 25.0,83.4 C 29.0,85.3 31.0,86.1 35.0,87.4 C 39.0,88.8 41.0,89.5 45.0,90.0 C 49.0,90.5 51.0,90.3 55.0,90.0 C 59.0,89.7 61.0,88.7 65.0,88.6 C 69.0,88.5 71.0,89.2 75.0,89.5 C 79.0,89.7 81.0,90.1 85.0,90.0 C 89.0,89.9 91.0,89.3 95.0,89.1 C 99.0,88.8 101.0,89.1 105.0,88.9 C 109.0,88.7 111.0,88.6 115.0,88.2 C 119.0,87.9 121.0,86.8 125.0,87.2 C 129.0,87.5 131.0,89.4 135.0,90.0 C 139.0,90.6 141.0,90.0 145.0,90.0 C 149.0,90.0 151.0,90.7 155.0,90.0 C 159.0,89.3 161.0,87.2 165.0,86.7 C 169.0,86.1 171.0,86.9 175.0,87.1 C 179.0,87.3 181.0,91.1 185.0,87.6 C 189.0,84.1 191.0,70.2 195.0,69.6 C 199.0,69.0 201.0,81.1 205.0,84.5 C 209.0,88.0 211.0,86.1 215.0,87.0 C 219.0,88.0 221.0,88.6 225.0,89.2 C 229.0,89.8 231.0,89.8 235.0,90.0 C 239.0,90.2 241.0,90.1 245.0,90.0 C 249.0,89.9 251.0,89.7 255.0,89.7 C 259.0,89.7 261.0,89.9 265.0,90.0 C 269.0,90.1 271.0,90.0 275.0,90.0 C 279.0,90.0 281.0,90.0 285.0,90.0 C 289.0,90.0 291.0,90.0 295.0,90.0 C 299.0,90.0 301.0,90.0 305.0,90.0 C 309.0,90.0 311.0,90.0 315.0,90.0 C 319.0,90.0 321.0,90.0 325.0,90.0 C 329.0,90.0 331.0,90.0 335.0,90.0 C 339.0,90.0 341.0,90.0 345.0,90.0 C 349.0,90.0 351.0,90.0 355.0,90.0 C 359.0,90.0 361.0,90.0 365.0,90.0 C 369.0,90.0 371.0,90.0 375.0,90.0 C 379.0,90.0 381.0,91.5 385.0,90.0 C 389.0,88.5 391.0,86.9 395.0,82.5 C 399.0,78.1 401.0,66.5 405.0,68.0 C 409.0,69.5 411.0,85.6 415.0,90.0 C 419.0,94.4 421.0,90.9 425.0,90.0 C 429.0,89.1 431.0,87.9 435.0,85.4 C 439.0,83.0 441.0,79.3 445.0,77.7 C 449.0,76.1 451.0,74.9 455.0,77.3 C 459.0,79.8 461.0,87.5 465.0,90.0 C 469.0,92.5 471.0,90.0 475.0,90.0 C 479.0,90.0 481.0,90.9 485.0,90.0 C 489.0,89.1 491.0,87.4 495.0,85.3 C 499.0,83.2 501.0,82.9 505.0,79.5 C 509.0,76.1 511.0,69.6 515.0,68.3 C 519.0,67.0 521.0,68.7 525.0,73.0 C 529.0,77.4 531.0,86.6 535.0,90.0 C 539.0,93.4 541.0,90.0 545.0,90.0 C 549.0,90.0 551.0,90.0 555.0,90.0 C 559.0,90.0 561.0,90.0 565.0,90.0 C 569.0,90.0 571.0,90.0 575.0,90.0 C 579.0,90.0 581.0,90.0 585.0,90.0 C 589.0,90.0 591.0,90.0 595.0,90.0 C 599.0,90.0 601.0,90.0 605.0,90.0 C 609.0,90.0 611.0,90.0 615.0,90.0 C 619.0,90.0 621.0,90.0 625.0,90.0 C 629.0,90.0 631.0,90.0 635.0,90.0 C 639.0,90.0 641.0,90.0 645.0,90.0 C 649.0,90.0 651.0,90.0 655.0,90.0 C 659.0,90.0 661.0,90.0 665.0,90.0 C 669.0,90.0 671.0,90.0 675.0,90.0 C 679.0,90.0 681.0,90.0 685.0,90.0 C 689.0,90.0 691.0,90.0 695.0,90.0 C 699.0,90.0 701.0,90.0 705.0,90.0 C 709.0,90.0 711.0,90.0 715.0,90.0 C 719.0,90.0 721.0,90.0 725.0,90.0 C 729.0,90.0 731.0,90.0 735.0,90.0 C 739.0,90.0 741.0,90.4 745.0,90.0 C 749.0,89.6 751.0,88.0 755.0,88.0 C 759.0,88.0 761.0,91.4 765.0,90.0 C 769.0,88.6 771.0,84.5 775.0,80.8 C 779.0,77.1 781.0,76.0 785.0,71.6 C 789.0,67.2 791.0,58.6 795.0,58.8 C 799.0,59.0 801.0,66.9 805.0,72.6 C 809.0,78.3 811.0,83.9 815.0,87.3 C 819.0,90.8 821.0,89.5 825.0,90.0 C 829.0,90.5 831.0,90.0 835.0,90.0 C 839.0,90.0 841.0,90.0 845.0,90.0 C 849.0,90.0 851.0,91.6 855.0,90.0 C 859.0,88.4 861.0,84.5 865.0,81.9 C 869.0,79.2 871.0,76.3 875.0,76.7 C 879.0,77.1 881.0,81.3 885.0,84.0 C 889.0,86.6 891.0,89.5 895.0,90.0 C 899.0,90.5 901.0,88.6 905.0,86.4 C 909.0,84.2 911.0,88.6 915.0,79.1 C 919.0,69.7 921.0,55.1 925.0,39.2 C 929.0,23.4 931.0,7.0 935.0,0.0 C 939.0,-7.0 941.0,-10.8 945.0,4.4 C 949.0,19.7 951.0,59.5 955.0,76.2 C 959.0,92.9 961.0,86.0 965.0,87.8 C 969.0,89.5 971.0,87.1 975.0,84.9 C 979.0,82.6 981.0,76.5 985.0,76.4 C 989.0,76.3 992.0,82.6 995.0,84.2 C 998.0,85.8 999.0,81.0 1000.0,84.2 C 1001.0,87.4 1000.0,96.8 1000.0,100.0" fill="white"></path>
    </clipPath>
  </defs>
  <rect class="ytp-heat-map-graph" clip-path="url(#5)" fill="white" fill-opacity="0.2" height="100%" width="100%" x="0" y="0"></rect><rect class="ytp-heat-map-hover" clip-path="url(#5)" fill="white" height="100%" x="0" y="0"></rect>
  <rect class="ytp-heat-map-play" clip-path="url(#5)" height="100%" x="0" y="0"></rect>
</svg>
```

3. From the SVG html code, the program extracts a list of coordinates (x,y) of points (about 1000 points) from the `d` attribute of the `<path>` tag
```python
>> [(1.0,87.5), (2.0,41.9), (5.0,37.5),... , (1001.0,87.4), (1000.0,96.8), (1000.0,100.0)]
```
<p align="center">
<img src="https://github.com/Dorian25/ytb-most-replayed/assets/32178615/daae76b6-b93a-40ef-9a2b-00bd3e5fe5dc">
</p>

4. The program reverses the scale of the graph by applying a simple subtraction to the y-intercept of the points
```python
>> [(1.0,2.5), (2.0,48.1), (5.0,52.4),... , (1001.0,2.89999999943), (1000.0,0.0), (1000.0,0.0)]
```
<p align="center">
<img src="https://github.com/Dorian25/ytb-most-replayed/assets/32178615/ec2019b2-19c3-4513-86af-a263f5c8d13d">
</p>


6. 





## How to run
